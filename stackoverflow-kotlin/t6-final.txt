612	q612	0.8039321537706853 "Android. Mockito uses real objects instead of mock"," So, I've just writing simple test. The problem is that test runner runs real 'Repository' class code instead of mock code... Do you have any idea why could I get an exception on this? Test class Presenter Repository Exception: "
511	q511	0.7236709523281826 "Code Coverage Inline Function"," i have this function written in Kotlin But when i created unit tests for this function, it shows 0 coverage on the report. I am using jacoco for code coverage. Do you guys know how to unit test inline function properly? Thanks! "
1575	q1575	0.7112212294779223 "Test running failed: Instrumentation run failed due to 'kotlin.UninitializedPropertyAccessException'"," I'm having an issue where my android instrumentation tests are not discovered. instead I get the following: "
586	q586	0.6992141544451476 "How to mock Kotlin's Object using Mockito/PowerMockito?"," I have the following class: That I would like to mock using Mockito/PowerMockito. Any suggestions? "
2792	q2792	0.6964331821764884 "Kotlin coroutines unit testing using mockito"," i am getting the below when i try to mock and verify on an activity that's calling a suspend function Error: Argument(s) are different! Wanted: userManager.getAccountInfo( (onCreate_callsGetAccountInformation$1) kotlinx.coroutines.experimental.CoroutineScope.() -> kotlin.Unit ); -> at com.pharmacy.AccountActivityTests$onCreate_callsGetAccountInformation$1.doResume(AccountActivityTests.kt:117) Actual invocation has different arguments: userManager.getAccountInfo( () kotlinx.coroutines.experimental.CoroutineScope.() -> kotlin.Unit ) -> at com.pharmacy.AccountActivity$loadAccountInfoAsync$1$1.doResume(AccountActivity.kt:199) Code: I have my unit test case decorated with runBlocking like this: here -> usermanager.getAccountInfo() is a suspend function. "
1503	q1503	0.6715295329028407 "Null pointer in view when run test android mocking"," I create test: MenuView MenuPresenter MvpPresenter MvpBasePresenter: when I run test I get: Any ideas why? "
2809	q2809	0.6708321358170027 "kotlin test whith mockito: comparison Failure"," I am trying to cover with test simple presenter, which looks like next: here is my simple test: and after last line i get next error: so what i am getting this error and how to avoid it and cover this method with test? thanks! "
660	q660	0.6695790968381464 "How to run Spek tests from command line?"," I have an android gradle project with JUnit tests and I've added a Spek test. It's working when I run it from the IDE, but does not include the Spek test, it only runs the JUnit tests. Is there a way to run Spek tests with gradle or any other way from command line? "
1278	q1278	0.6476163754649282 "Cannot mock final Kotlin class using Mockito 2"," I am unable to mock a Kotlin final class using Mockito 2. I am using Robolectric in addition. This is my test code: The test fails when we try to initialise the mocks in the method. In addition, I am using the following gradle dependencies in my code: All other unit tests pass using this configuration but as soon as I try to mock the Kotlin class it throws the following error: Please note I am using Mockito version 2 and I am using the dependency which automatically enables the ability to mock final classes. "
3696	q3696	0.6432109640739707 "Unable to run parameterized tests with Android Test Orchestrator"," I'm trying to run parameterized tests using Android Test Orchestrator. But for some reason parameterized tests won't start. I can run all tests properly without Orchestrator but I need it to clear some data between tests. This is output from Gradle. It can see all 14 tests but only 12 are executed (missing 2 are parameterized): Gradle: Test: EDIT: As a workaround sealed class can be used: "
4035	q4035	0.6327546992284651 "Android kotlin parser Gson Volley"," How can I access idClubLocal with Gson-Volley? I get the codCompeticion and the nomCompeticion but there is no way to do it to idClubLocal [{\"codCompeticion\": \"26\", \"nomCompeticion\": \"Equipo\", \"jornadas\": [ {\"idClubLocal\": \"xxxxx\".... FragJorActual CalendarioAdapterArray ModelArray ModelList class ModelList { } "
4814	q4814	0.5866928874556582 "How to solve this CalledFromWrongThreadException when doing android espresso test?"," I got an error when doing espresso test The line 47 is the code in the second tests where it tries to perform a click operation. The 1st test passes where the 2nd failed because it can't even run due to the exception. What happens here? And how to solve it? "
307	q307	0.5742720980670298 "java.lang.AbstractMethodError: abstract method when running espresso on Kotlin with Mockito"," I have an instrumental espresso test that uses mockito. The test class as below. My TestComponentRule as below And my Dagger TestModule And my build.gradle file as below When I trigger my Instrumentation test, it error on and with the error "
3919	q3919	0.5305302929550607 "How can Android Live Data that is derived from a switchMap be tested with junit and mockito?"," I am writing a unit test to assert observers are being called with expected arguments. I have had success testing by using the , mocking an observer, and observing the data via the method. When using the same approach with that is derived from a assertions are failing. For Example: *SingleLiveEvent taken from the Google Samples Repo And then the corresponding test (using mockito_kotlin): Mockito reports that both of the mocks (the login service, and the observer) had zero interactions and the tests fails. Any thoughts on how to implement this test so that the mocked classes are properly called? Thanks in advance! Additional Notes: I tried using the in combination with to wait to execute the calls to when reported idle, but with no luck. The method on the service returns "
324	q324	0.5274193722393911 "How can I run a single Android Test using Kotlin?"," I am using Kotlin 1.0.3 for Android Development in Unit Testing but when I try to run a single test it runs all tests of the class. Does anyone know how to avoid that behaviour? "
366	q366	0.5198341269972075 "A simple kotlin class with mockito test caused MissingMethodInvocationException"," I start to learn Kotlin and Mockito, so I code a simple module to test it. AccountData_K.kt: AccountDataMockTest_K.kt: And when I run the test, it reports an exception about the method: I doubt why the method is not a method call on a mock... So please help me, thanks. "
283	q283	0.5198341269972075 "Android Kotlin: Mocking a free function using Mockito/PowerMock"," I am having a free function in Kotlin that I want to mock for test purpose. My free function is something like this: In my test I want to mock/stub it so that when it is called a mock value is returned. Even if it could be done with PowerMock please do let me know. PS: I am using Kotlin 1.0.1-2 for my project. "
1937	q1937	0.5133642626974851 "Not run methods beforeEachTest and afterEachTest kotlin spek android"," I'm trying to write a test using Spek framework on android. But I'm very confused. In accordance with the code, the presenter must be initialized in method beforeEachTest. And the condition must be cleared in method afterEachTest. But when I run the test, it failed an error NPE in line mPresenter!!.setPass(PASSWORD, PASSWORD). But if you uncomment the two lines in front of it, then the test will succeed. What could be the problem? Thanks in advance for answers "
1466	q1466	0.5127692196311404 "Android Espresso - how to run setup only once for all tests"," I am using Espresso/Kotlin to run tests for our Android Application and I want to run the setup once for all tests in the given test class. I created a companion object to launch the application once (which it does), however it then closes and doesn't stay open while each test runs. How can I have it launch the application, run all the tests in the test class, then close the application? I also tried the following, but it still launches once then closes, then tries running the tests: "
4965	q4965	0.5036938255533839 "Spek + Retrofit api test crashing"," I'm trying to test Retrofit api with Spek It throws nullPointerException on the on{...} block Associated stacktrace : https://pastebin.com/gy6dLtGg Here’s my test class Here is my RxSchedulersOverrideSpek class "
3602	q3602	0.5036938255533839 "How to unit test custom Application class?"," I would like to write some unit tests for my custom class but my tests fail immediately after I try to create object with this error: This is my class: And this is my test: "
4820	q4820	0.5024592020778955 "How to mock util.Patterns with Mockito or MockK"," I have a method that I need to test : But it returns a nullpointerException error because Patterns.email needs to be mocked. Right now I manually create and test the Pattern but cannot test the method above. Any idea how to do this with mockito or mockk so I can test this method as a whole instead of creating the patterns manually in the test. "
4597	q4597	0.5019403644686261 "How to unit test kotlin coroutine with nested suspended functions"," Below is the piece of code that I am trying to unit test. The code before the first suspending function is testable but after that, the tests keeps on failing. I tried using but cannot test the nested suspended async function anyway. Below is my unit test, I am using mockito for mocking my listener and checking the number of interactions. But the last two test fails. Can anyone help me out with testing? "
276	q276	0.5018431485083946 "Kotlin inline keyword causing IntelliJ IDEA Coverage reporting 0%"," I created a very simple test function as below I Run it with Coverage... The test coverage number is 0%. But if I remove the keyword, the test coverage number shows now. Is this a Kotlin issue or Android IntelliJ IDEA Coverage issue? (note: JaCoco coverage is good). Note: I'm using Android Studio 2.0 and Kotlin 1.0.2 "
5177	q5177	0.49343140865821083 "PowerMockito Spy: Calling real method results with CannotStubVoidMethodWithReturnValue"," I'm starting to bang my head against the wall, but I completely don't understand how to call real method on spied class. Long story short, I'm spying on my tested class to stub one private method. Then I want to call real void method of tested class but it says that The problem is that I don't need it to be stubbed. I have tried doCallRealMethod() as well, no use. I'm using Kotlin and Android Studio to run some unit tests for my Android project. I have following class that I want to test: And here is testing class Test fails when calling real method on following line Here's the error stack trace "
3206	q3206	0.4925081833218627 "How to test constraints on object initialization?"," I am writing an App for Android, and I am wanting to start writing tests for the classes I am writing. I am fairly new to writing test cases. Right now to create a test, I use IntelliJ and use it's wizard to make a new JUnit4 test. The wizard allows me to select methods from my class to test. But for the object I am testing, I do not want a negative number passed to the constructor. Where in my Test class is the best place to test these constraints? I know that to test the constraints, I just need to make sure the exception is thrown and caught, but I am unsure if I should make a new method for this, or just wedge it into one of the functions IntelliJ pre-made for me. Here is the generated test class: "
5415	q5415	0.4916253848044498 "Android kotlin mockMaker issues"," Hi i am trying to mock a final class(as all classes in kotlin are final by default) and added the following dependencies in my gradle: the mockito-inline is supposed to enable you to mock a final kotlin class and so i added to both my java unit test and my instrumental test using testImplementation and androidTestImplementation On building the project i get the following error: Any ideas whats going on? if i remove the androidTestImplementation of the mockitio inline, it compiles fine but when running intrumental test i get the mockito error saying it cannot mock a final class. "
4866	q4866	0.4884496282724421 "Kotlin & Mockito unit tests failing in gradle"," Running unit tests locally on Android Studio works fine but when I run it with gradle using . The tests fails with the exception saying Mockito cannot spy/mock final classes. I thought using mockito with the inline extension was supposed to fix this. I have this dependency in my gradle file Is there something that I'm missing? "
4311	q4311	0.4877880691931334 "Mockito not working when method start Observable"," im trying to test a presenter, but the test only pass when things are outside of Observable, my presenter: rest api part: test that works ok: test that is not working (it only run the .showProgress outside my test class setup: no error show, the only thing that the test result show is this: im following this: https://github.com/burakeregar/KotlinRxMvpArchitecture "
4084	q4084	0.484158783101277 "Mock object in Android Unit test with kotlin - any() gives null"," I'm trying to test my classes and I need to mock a class. My code is the following:- But in the second line it throws an error: I've tried with mockito-kotlin and befriending-kotlin-and-mockito with no exit. Do you know how to fix it? "
3475	q3475	0.484158783101277 "Not able to mock AccountManager class in Kotlin which is using RxJava"," This is my code in kotlin and RxJava, I am trying to test method by mocking accountManager class from Android but not able to mock it :( . Creating variable like this: Injecting Method to test : Unit testing method: "
2469	q2469	0.484158783101277 "Kotlin, Mockito and Android Test Instrumentation. Lateinit Property has not been initialized"," I'm trying to mock an UseCase dependency in a test instrumentation. I am creating a to work with this: but when I hit on , the usecase is not loaded. I have the same implementation in Unit Tests and it works. These are my dependencies: This is how I set my instance in : "
974	q974	0.4749392463856716 "Share code between unit test and instrumentation tests when using kotlin"," Similar question: Sharing code between Android Instrumentation Tests and Unit Tests in Android Studio My setup is the following: folder that contains unit tests. These can be either Java or Kotlin classes that contains instrumentation tests. These can also be either Java or Kotlin classes is a folder that contains a bunch of utils that are shared between unit and instrumentation tests. This sharing is defined in gradle as: This allows any Java class in or to access the utils. but not the Kotlin unit tests. My assumption is that they are not added to the sourceSets. My question is: how can I add them? I tried: But that doesn't seem to work. "
4514	q4514	0.47479560927620057 "NotificationManager.isNotificationPolicyAccessGranted NPE in Robolectric"," I have want to write a simple test involving Robolectric's . Error: notificationManager works until I call . Any idea why this is happening? I am using and . "
4555	q4555	0.4682442742739425 "Android Studio - Kotlin Tests Throwing - Class not found - Empty test suite"," When trying to run espresso tests written in Kotlin on Android Studio (as far as 3.2 Canary 9), I'm getting the error: Process finished with exit code 1 Class not found: \"com.myproject.directoryofwinning.VerifyAppIsAwesomeTest\"Empty test suite. Strangely, Java tests in the same project have no issues. Have tried to reset the configurations and suggested by others, but this doesn't seem to make any difference. "
4235	q4235	0.4626236161022938 "Unable to test method that internal initialize value"," In android, I have method in my presenter class that connect to remote/local data and I want to test its behaviour. my project is MVP + Dagger + RxJava I want to test LoginPresenter LoginPresenterTest Error Log After I see this message error, I try to debug the test and found out that in the tested method rxjava throw this at OnError.. after investigate the code I think the problem should be in the following area.. this code in LoginPresenterTest.class and this code in LoginPresenter.class I think mock data for Date in test and presenter class is not the same right? what should be the way to resolve this issue ? Note remove the following line in method make test pass!! "
2750	q2750	0.45965050770725113 "Jacoco is reporting 0 coverage of Kotlin classes by unit tests, in an Android project"," I'm using Android Gradle Plugin 3.0.0. I'm migrating an Android app from java to kotlin. My app has classes in Java and Kotlin, and tests are in Java. I run . This runs both unit tests () and instrumentation tests (). The report produced by jacoco in doesn't show coverage for Kotlin classes which are indeed covered by unit tests. The report does show coverage correctly from instrumentation tests. Note: I came across these other questions, which aren't exactly the same issue: JaCoCo returning 0% Coverage with Kotlin and Android 3.0 has a problem with code coverage by instrumentation tests, not unit tests. Android Studio JaCoCo reports 0% coverage has a problem with code coverage from inside Android Studio, but not Kotlin-specific. Relevant portions of my app module's build.gradle: "
2478	q2478	0.45915006970215894 "Error with mock methods"," I try to mock some methods in the project so that when they are called, a certain value is returned. But when you run the tests, they fall with the output: If you run the same code in debug mode and run through all the lines, then when you call shared.getToken (), the value that we specified is returned. But with normal startup, tests fall on this line. Code: Shared: Presenter: Thanks! "
385	q385	0.4569128002317289 "I have to restart IDE to run tests"," Weird bug with Android Studio 2.2 when running a single test directly in IDE - I'll either have \"No tests found\" or run my previously compiled test. Example: I'll create this test, and get the \"No tests found\". So I restart, and test is found! Obviously, the above test passes because it's empty. Next, I want my test to fail. So I manually throw an exception and add one line of code, below. Now I recompile, and this test passes too, because IntelliJ is for some reason has cached the previous test and reruns that. To get this test to properly fail - I must restart the IDE. Anyone know what's going on? Note - I'm using Kotlin pretty heavily in this project. EDIT 2: This is a JVM test (non-android, ) in an android library project. EDIT: here's a full test class "
5617	q5617	0.4534895952225005 "JUnit tests always pass when executing in device"," This simple test Unexpectedly, this passes when put in (both through Android Studio and in the terminal), but obviously fails as expected when put in . "
1359	q1359	0.45116003953738604 "Mocked method not returning value from test-local variable"," I have written a test to check if my method for adding and subtracting coins from the userdata preference method is working correctly. I mocked the SharedPreferences class and I am using a local variable that stores the coin amount. However the mocked getInt() does not seem to return the correct value of coins: Running the test addCoinValid fails (Expected: 5, Actual: 0). I've made 2 outputs during the test: variable: 1 - mockedReturn: 0 variable: 5 - mockedReturn: 0 The left number is the value from the variable and the right number is what the mocked getInt() returns. Can anyone tell me what's going on? :O This is my test: And this is the class that is tested: "
2574	q2574	0.4482983079057035 "How to set up Mockito for Kotlin and Android"," I want to use Mockito for unit testing, so I added the Mockito library into my gradle dependencies. But still, I can not use any Mockito annotations. /androidTest/ExampleTest.kt What I'm missing it? "
2054	q2054	0.4463670114553139 "Mock & unit test a Fragment using Spek & Mockito"," I am using the Spek framework & Mockito to test my Android app. I wish to unit test features of my (of type ). From my understanding I must mock said fragment in order to test it, how may that be achieved with the frameworks mentionned above? Forgive the lack of snippets as the various tutorials I have found using both frameworks do not go into details on the testing of s. Here is my 's : "
3153	q3153	0.4427567472794228 "Failing to run Instrumented tests on a new Android Kotlin project"," I just created a new android application with Support. When I've tried to run the default instrumented tests it does not run and shows me this message: This the Instrumented test class that I'm trying to run: "
5053	q5053	0.4418025656217273 "Espresso test to verify that SwipeRefreshLayout is showing the refreshing indicator"," I would like to create an Espresso test which verifies that is showing the refreshing indicator. How can I do this? "
1869	q1869	0.44137612709981433 "Kotlin+Mockito2: ClassNotFoundException for presenter tests"," I have a sample app written in Kotlin based on CleanArchitecture-Android style. Below is the configuration for the app: presentation/build.gradle presentation/src/test/java/package/RepoPreferencesPresenterTest.kt When I try to run the testcase, I'd face with everytime. Unable to mock the UseCase present in domain module for the presenter tests, other than that app is running fine. Any idea how to solve the problem? (I'd also tried using mock-maker-inline but it doesn't work) "
133	q133	0.4334400483668953 "How to use Spek"," I tried this sample, but it raises a syntax error. Is there any other way to test Kotlin? For example, with JUnit or Spek? "
5345	q5345	0.43181086318765005 "Mockito not working for androidTest"," i am trying to mock some objects nd then inject them to a presenter but doesnt work It sais the lateInt property that i have a mock on is not being initialised: Here is my test clss Here is my build script The error i get: "
3991	q3991	0.4309986444635699 "Unable to run android instrumentation testcase ( Kotlin ) in android studio"," I have written simple instrumentation test in kotlin as below Everything works fine when i am creating androidTest apk & even testcase are running fine but throwing below stacktrace in android studio. "
2801	q2801	0.4309986444635699 "TestScheduler does not work (Kotlin + RxJava2 + mockito)"," I wanted to write a unit test that will verify method below. However, I've got null pointer exception where the line holds . My question is how do I verify onnext and onerror conditions in a method such below? Test method: EDIT presenter test "
1851	q1851	0.4256741864650504 "Rule is not public Error in androidTest"," I'm new to android development and I'm trying to write a sample instrumented test with JUnit4. And I've got this error while the test was running: and I don't know why that happens. I'm using Kotlin language and it labels my rule as public by default. here's my definition of rule: Thanks. "
4002	q4002	0.4194593002555421 "Dagger 2 Mocking Content Resolver class"," I have a that is injected to my using . I want to mock this in espresso so in my test do I do: 1: mock it in the class as an external variable or 2: mock it inside the method Or am I doing it completely wrong and there is another method to correctly mock the "
852	q852	0.4185263138482393 "Simple Calculator, Unit testing using KOTLIN with Spek (Exit code -1)"," I am very new to android developing and recently did my first project. It is only a basic calculator with addition, subtraction, multiplication and division. I am now trying to do unit testing to test the functions of my calculator but i am receiving this output(shown below). I have no idea what is causing this to happen. Please help Output: FunctionsTest.kt: Gradle Build: "
3530	q3530	0.41626251503161127 "Android Kotlin instrumentation test not recognized as instrumentation test"," I'm trying to write a kotlin instrumentation test in my Android project. it's pretty basic for the moment: When I run it, it says that . But when I run the Java version of this class I'm prompted to choose the device on which I want to run the test (meaning that AS recognizes it as an instrumentation test). The Java version looks like this: If I then convert this Java class to Kotlin and re-run the test, I get the same . What am I missing here? Thanks "
3766	q3766	0.4137222482551458 "Unit test condition for findFragmentByTag"," I have the following activity and I want to unit test the case where the fragment is already attached and should return a non-null. And should fall into the else condition: This is my activity: The test class is this: I can write the test to attach a fragment, but I want to test the condition when a fragment is already attached and should return non-null. Thanks for any suggestions, "
5620	q5620	0.41306869151810405 "In Android Kotlin, the assertNotNull causes the unit test to not run"," In Android Studio I created androidTest package and added a . The function is required to be static, so I have to add and put it in the . But if put inside the it will show “Empty test suite” when running the test, and the test does not run. But it does see the log which is placed before the assertXXX statement. If I comment out the in the function, which is inside the companion, the test will run as expected. Any idea why the assertNotNull() (actually all assertXXX functions) causes the test not to run? Gradle has: test class: "
3060	q3060	0.4109234217817402 "Is it possible to analyze Android Kotlin code-coverage with SonarQube?"," I have configured a Jenkins item that, after gradle building and testing, calls the \"Execute SonarQube Scanner\" with the following specifications: This successfully runs SonarQube and generates a report to IPaddress:9000 that measures: Bugs, Vulnerabilities, Debt, Code Smells, and Duplications just like it is supposed to. However there is no place in this report that defines the code covered by tests. SonarQube is running the Kotlin plugin successfully and sees the codebase itself, but is not determining coverage. Is this possible to gather this information with SonarQube when using Kotlin Android? I did try installing Jacoco, but did not see any new data on the SonarQube results. "
3770	q3770	0.408632265196718 "Relationship between Sonarqube & SonarScanner"," I'm in process of setup Sonar for my Android-Kotlin gradle based project. There I setup local system that run ./gradlew Sonarqube and generate report. I come across another tool sonar-runner which need to generate report. I checked sonarqube downloaded folder & that already has some sonar-scanner file & generating report without explicit setup. So do we really need sonar-scanner explicitly ? What I understood is SonarScanner is the scanner that work for scanning & help sonarqube to generate report. Please make me correct "
2512	q2512	0.40718986397660084 "GMaps Android API and GeoJson, how to cover all the world with an hole"," I am building an app where the polygons are retrieved from a geojson file. What I want to achieve is cover all the world and have an hole on specific area. I tried to do this initially using simple Polygon class like this: and works perfectly. Now I need to get the same result with a geojson file but it's seems impossible. With the geojson I use: This give me a strange result on map. What can I do? "
505	q505	0.4032853648916169 "Unit Test Verify a Function Passed to be Called"," Let's say i have this function (written in Kotlin): Is it possible to verify (in unit test) to be called when assignee is null or empty? Thank you all! "
2953	q2953	0.40262614655817147 "How to test a class with anonymous listener that is set inside a function?"," I am just getting into unit testing on Android and I ran into some difficulties when I tried to test function of this class. If I mock my ViewKontroller test still crashes with NPE on line . So what am I doing wrong? "
5637	q5637	0.40262614655817147 "Spyk with generic"," I want to use spyk for class with generic. It produces StackOverflowError. It is impossible to use every { childClazz.foobar(view) } just Runs and super.foobar(view) definitely need to be invoked Here is a stacktrace: Is it possible to use spyk here? I need it for private methods. "
1442	q1442	0.40187407072021014 "JaCoCo returning 0% Coverage with Kotlin and Android 3.0"," I am trying to check my code coverage for a test case that I wrote in Kotlin. When I execute , my coverage.ec file is empty and my reports indicate that I have 0% coverage. Please note, the test cases are 100% successful. Can anyone think of any reasons my coverage.ec file keeps returning 0 bytes? I have searched everywhere with no luck. "
4264	q4264	0.40187407072021014 "TestScheduler not working while testing specific usecase"," I am testing single use-case. but test observer will not emit any thing in test environment. even if i change from to still test fail. i am confuse. and i don't know what i am doing wrong here? if i remove , method then test pass successfully.then what is the actual use of ? following are the file following the test class with above class under test "
1650	q1650	0.4013109331688686 "Android Studio 3.0 gradle 3.0.0-beta2, breaks Kotlin Unit Test Coverage?"," I have a simple Kotlin classes, as below I have my test (written in Java here, could be in Kotlin, also) When I run a test with Coverage in Android Studio 3.0 Beta-2 using , no coverage is reported for it. But when I run the test using , 100% coverage reported. When I change my source code to Java: It works fine for both gradle build tools It seems to me that has the broken test coverage measurement for Kotlin. Did I miss anything? Is there a workaround for me to get the test coverage in Kotlin? "
275	q275	0.3978613651149775 "Running Spek test shows error \"Empty test suite\""," Gotten familiar a bit with Kotlin I wanted to introduce it another Android-Java project, as a first step for testing only. I decided to start straight with Spek. I added the following dependencies to build.gradle of the module to be tested: Among others I used the SimpleTest class of spek-samples of the git repo: The code compiles and in Android Studio I am shown a green play button next to the class declaration to run the tests of the class. However, doing so results in I created JUnit3 and JUnit4 tests of which all ran without any problems. Did I miss any additional configuration step for Spek tests? "
170	q170	0.39591234637728184 "Extend Mockito verify for Kotlin not working (in a \"kotlin way\")"," I want to extend verify to allow checking multiple commands over the same mocked object but it is not working, it compiles but on run it dont run each command over the same. Just want to avoid writing more things like: and write more like: First try: Second try: But those are not working, all the tests pass even if I dont call the methods in the presenter, How can I do this? "
3561	q3561	0.39591234637728184 "Gradle error - when I run unit test on a single Kotlin file or an specific test function"," In , when i run only a unit test file or an specific test function, fails but when i run the parent folder of the file everything is Ok. the error : I can run the test if i create a new project with the already enabled! Thanks "
2607	q2607	0.39258062982108405 "Providing mocked object to another mock object constructor?"," First time unit testing, and using Mockito. I'm not sure if I'm thinking about testing this correctly. Here is the situation: In my Android app, I am using Model-View-Presenter. I am trying to test a method in my presenter class called to see if the service manager I pass to it will eventually call a callback (this method is called by the view) by verifying it with mockito. The presenter class also implements a callback interface () that is provided to the 's constructor. What I want in this specific unit test is to verify that is called. The problem: Android unit testing seems to require that ServiceManager be mocked (ServiceManager extends abstract class AsyncTask) because when I call , the Android unit testing lib will throw an exception if it is not mocked. However, if I mock the ServiceManager, I can't provide it with two necessary parameters to the constructor, which SHOULD be mocked, if I'm understanding unit testing correctly. The two parameters to the constructor are an interface callback (which is the presenter class), and a class object that is responsible for sending JSON through http. Both of these should be mocked, correct? Because in a unit test you don't want these dependencies to actually make HTTP calls or call callbacks, right? It seems I'm overthinking this. What I really want is to see if my view object which is passed to presenter, calls , so I should really just forget testing the and just call directly. Is this better than the above route? However, another problem is that even if I call directly to test if the mock view that is passed to presenter is called, that method code contains a call to JSONObject which is Android related code, and since it belongs to the android.jar file, it will throw an exception because it is not mocked! Am I supposed to provide an injection for that too?! I'm lost as how to test this. What's the correct way to verify that the mock view has called ? "
808	q808	0.38917934305103435 "JUnit testing with KOTLIN android studio [Basic Calculator]"," I am very new to android developing and recently did my first project. It is only a basic calculator with addition, subtraction, multiplication and division. Now, I am looking to go into Unit testing using JUnits with KOTLIN. How should I go about doing this? I've been searching around and have no idea. Calculator Java Codes: } Function Class Codes: } "
1997	q1997	0.3890230883840615 "How to get different implementation of top level function in Unit and instrumentationTests for Android"," I have a kotlin file with top level function(not member of any class). It compiles to class with static function in Java. I want to have different implementation of this function for unit tests (platform independent) and instrumentation tests (production behaviour + Espresso Idling Resource). I can put the same file to the same path for prod and tests, but when I put it to test and androidTest - IDE see it as in one source set and cannot resolve which function I would like to use. Since I'm using top level functions, I cannot use DI to pass different implementation to tested class. Is there any was to have different implementation of the class for test and androidTest for top level functions? I tried With no luck. "
214	q214	0.38709191545655985 "Android instrument test with Espresso fails: NoSuchMethodError get() in javax.inject.Provider"," When I run my Android instrument test, Espresso class initialization fails with the following stacktrace: I don't know if it is relevant, but my project uses Kotlin. Any idea? "
1912	q1912	0.3840066086617795 "Cannot use Kotlin backticked method names in androidTest - bad descriptor exception"," In my unit tests I use Kotlin's backticked methods for better readability, e.g. It works nice and well for tests in directory, but when I try to do the same in I get an exception: Is there some trick to make it work? "
662	q662	0.3832953075083972 "How to mock final class with Mockito 2 on Java Module in Android project?"," I have a Android Clean Architecture project write in Kotlin with 3 modules: data (Android Library) domaine (Java Library) presentation (Android Application) The 3 modules each have unit tests written with junit. But with Kotlin every class is final by default. I quickly had the problem: How to mock a final class with mockito It's now possible with Mockito 2 It can be done via the mockito extension mechanism by creating the file containing a single line: I know that this question has already been asked (How to mock a final class with mockito, Mock objects calling final classes static methods with Mockito), but I didn't find the answer I'm looking for. "
4565	q4565	0.3801032758779871 "Actual close() method is called although Realm is mocked"," I have a fairly simple method to persist a , after saving is called because the database is no longer needed. The problem: The actual method is called although Realm is mocked using mockito. This causes an exception: Is mockito not able to mock Realm? I don't want to include PowerMock just for testing this case :D The tested class The Unit Test "
1541	q1541	0.37356486613288337 "Kotlin Unit Test Always passes when run from Android Studio UI"," I'm trying to implement some Unit Tests with Kotlin in my application. The problem that occurs is that when I run the test from the UI, the test always passes, whatever I do. If I run the test from the terminal, everything goes as expected, the test fails when given the incorrect values. Does anyone knows why this happens? Is it a problem from Android Studio? Is there a way to solve it? Even this test passes when run from the UI "
977	q977	0.37271184600588597 "Android Espresso IntentsMatcher works on new device but not old"," I have an Espresso unit test that seems to work on newer devices but fails on an API 17 device. Here is the test: The error is: I've tried sleeping the thread for 1000ms before is called, but that doesn't seem to help. Any ideas why it succeeds on some devices but not the older one? "
4964	q4964	0.3717442694904163 "When UnitTesting a function what is the best practice when you mock functions it usees"," I have a function X and the function uses functions Y. When i test X should i mock Y to return the value i want or should i let it call the real method and let it calculate the value. OR "
3090	q3090	0.367081151125294 "Android tests are running without lanuching the emulator(choose device dialog not appears) - empty test suite"," I am struggling with running the tests under the androidTest folder - currently even when i am not launch the emulator the test runs without it, there is no dialog to force me to choose the device on which i must run the test. It leads to problem, that when i run the test error appears in the console: Only when i manually Edit Configuration for this separate method choose the \"deployment target options\" and choose \"open select deployment target dialog\" it runs well, i choose the emulator and test runs. but this means that i will have to manually do it for every test method in my androidTest package. What is really happening? I've tried this even on brand new project, configured to be Kotlin project in Android Studio 3.0.1. You can try it for yourself. "
1329	q1329	0.36505902750689595 "Only the first test passes with TestScheduler when running multiple tests (Kotlin)"," I am trying to test my presenter in an MVP architecture using RxJava in Kotlin. I have created a test rule to substitute the usual schedulers with a to be able to test asynchronous requests: This is my test class. The problem is that every test is passing, if I run them separately, but if I run the whole suite, only the first one passes. There should be a problem with the , because if I use an immediate scheduler, it works. Here is the error I get in the console: UserListPresenter class "
2247	q2247	0.36284491863408996 "Kotlin unit tests in android studio"," I am using Android studio RC2. When I try to run kotlin unit tests through android studio, gradle executes the assembleDebug task and creates a debug apk before running the test. With Java unit tests, it doesn't do this. Is there a workaround for this? Kotlin unit tests are slow and take a minute to just setup and rub. Thanks "
3879	q3879	0.36249554583692006 "Can we test the methods written in Kotlin with Mockito?"," Can we test the Mobile Application methods written in Kotlin with Mockito tool? Have a mobile application which uses the library written in kotlin. Can Mockito supports to test these library methods. "
4553	q4553	0.36249554583692006 "java.lang.NoClassDefFoundError: android.databinding.DataBinderMapperImpl when running Espresso tests"," Data binding setup: The fragment class which uses data binding: Every time the Espresso test is run for this fragment, I get the following exception: "
2701	q2701	0.36249554583692006 "Why running kotlin tests so slow in AndroidStudio 3.0"," When I updated project to AndroidStudio 3 unit tests became runnig slowly (about 6 mimutes) than AndroidStudio 2. Recently, I updated project to AndroidStudio3.1, but test running time stayed the same. "
2759	q2759	0.36249554583692006 "The @Rule > must be public ValidationError in Kotlin Junit test"," I tried to use a unit test rule annotation and Android Studio didn't highlight any error here: However after executing the test following error happens: How to fix this? "
2385	q2385	0.36249554583692006 "Failing kotlin unit tests after gradle plugin 3.0"," After updating Android Studio to 3.0 I keep getting failed tests due to the following: What's interesting though is it's only happening on kotlin unit tests. Has anyone faced this before? Know what might be happening? Interestingly enough, line 13 in is a . "
3318	q3318	0.3605700509750712 "lateinit property presenter has not been initialized with EasyMVP, Robolectric and Kotlin"," I have problem while trying to use Robolectric to test activity which is using EasyMvp. All of the classes are written in Kotlin. This is beginning of an activity: And at the onStart, every activity is initializing extras in presenter. I was trying to introduce Robolectric tests in my app. But while Running the test, I am always getting error: I assume that this is problem with Robolectric annotation proccessing. Is there any solution for that? "
5395	q5395	0.3605700509750712 "Mockito and JUnit not found"," I have a very old project that has started out as a an eclipse project and is now gradle/ android studio Currently I have just one test which is stored in the path I have the below gradle file If I run my unit tests with the gradle file as above is I get errors of This is effectively everywhere where junit is referenced in the test. If I change to The tests compile but the test runner will complain that the suite of tests is empty. What am I doing wrong? "
254	q254	0.35862079516538964 "How could I test a method is not being called for a non mock object?"," I have a test as below, where in the given condition, I want to ensure is not called. However it error out stating The error is on the line It is expected as is not a mock object. How could I test a method that being called for a non mock object? I see the answer in how to verify a method of a non-mock object is called?, but that is still using Mock and Spy. I hope to find a way without need to mock for a class instance that I already have. (Note: the above is written in Kotlin) "
4047	q4047	0.3547576202874732 "JUnit Test return lateinit property has not been initialized on presenter"," I wanna t create a simple JUnit testing an the test return an error like my tests I will write in Java. Here is the test class. My presenter and all classes is written in with and . In My Presenter I do that In AppComponent class that And the error of test is that \"lateinit property mUserService has not been initialized\" "
1227	q1227	0.3547576202874732 "Robolectric test and LiveData"," To get a hang of Kotlin, LiveData and Robolectric alltogether, I got a simple splash screen activity. It works properly when running the application, but it fails to work in the test. It is like the live data's callback is never triggered or like if no oberver is registered for it. Here is the test: The activity: The view model (which gets mocked anyway, so implementation is not used): "
3568	q3568	0.3529928798301221 "Running Kotlin Koan in Android studio"," Windows 10, Android studio 3.0.1. Cloned kotlin koans and tried to run a test in Android Studio. How do I do that? The doc says \"To run use the 'test' icon on the gradle panel\". Um, what gradle panel? I don't see one, nor any way to bring one up. Somebody else here asked a similar question (Run Kotlin Koans tests from Android Studio), he says he gets a green arrow by the test. Not seeing any green arrows anywhere. I'm new to both Android Studio and Kotlin, but have used several other languages and IDEs over the past 40 years or so. "
1546	q1546	0.3519566878323335 "Running tests from Android Studio IDE doesn't rebuild pure java library module"," I have a project in Android Studio which only has a single non-android, pure java module. This module contains a class which I put under test. The test is executed properly if I manually call or . But if I run it from the IDE (\"Run 'All tests'\"), the module is not rebuild, it is run on old compiled code. Only when I rebuild it manually with e.g. the code is recompiled and tests are executed properly. It seems similar to this problem: Android Studio doesn't compile test classes for Java library modules during Make Project "
2883	q2883	0.3515374273873265 "Cannot unit test in Kotlin (ExecutionException, Aapt2Exception)"," A simple test... ... results in the following... Adding to gradle.properties (or also gradle-wrapper.properties) made Android Studio halt indefinitely every time I ran the test. This is weird because I'm able to... Run my production app (filled with Kotlin files) Unit test in Java But, for whatever reason, I can't test in Kotlin "
3110	q3110	0.3485096444480693 "Android Architecture Component ViewModel - How to mock ViewModel on test Activity?"," I'm trying to setup UI testing similar to GithubBrowserSample and it looks like the sample project only has mock for but not an example for . Here's my code where I am trying to test the by mocking . But the is not getting set before in Activity. Can someone help me about this issue please? "
2633	q2633	0.3485096444480693 "How to unit test presenter method based on an Observable returned value?"," Having the following real implementation of a function, where returns an type value: How can I unit test if is called when subscriber gets ? I have tried the following approach, but unfortunately appears on the scene. "
5123	q5123	0.34807243311415204 "Kotlin Coroutine Unit Testing Error: Exception in thread \"main @coroutine#1 @coroutine#2\" java.lang.NullPointerException"," I'm trying to unit test a presenter that I made with Kotlin coroutines, and this is also my first time using Mockito Whenever I try to run the unit test I'm getting the following error the first time it tries to do anything with my view while in the coroutine This is the relevant part of my presenter, the line referenced in the error is The call to is a suspended call I'm passing in a test coroutine context into my presenter as per this article https://android.jlelse.eu/mastering-coroutines-android-unit-tests-8bc0d082bf15 This is my unit test currently UPDATE: I've been doing some additional tests, and it looks like if I remove the suspend call within my presenter it won't crash and I can verify if something has run with Mockito, but this isn't an actual solution... but something with that suspending call is causing problems? "
4320	q4320	0.3456568328575673 "Android change locale for tests"," I want to test whether the strings are updated correctly when the user changes the language. I am using to test whether the string matches the correct locale and I am currently changing it like so: The problem is that the espresso test is asserting false so I was wondering what is the correct way to set the default locale before running a test? "
827	q827	0.3456568328575673 "Running unit tests doesn't catch changes"," I'm going through the kotlin koans repo (https://github.com/kotlin/kotlin-koans). Whenever I make changes to my .kt files and run the unit tests, the changes in the .kt files aren't reflected in the test results. I've been getting around this by running before running the unit tests. I'm using Android Studio as my IDE. Any idea what's happening? "
5488	q5488	0.34121314227245014 "Final class method not getting tested as desired with Mockito 2"," As described in Mockito 2 docs we can now Mock final classes, so I tried to do it in a simple project, but the results are not proper. Here is my project structure Here is the org.mockito.plugins.MockMaker text file Here is a demo activity for testing here is the test class The test should have passed, since I am always returning true, but here is what I get. I have also marked and unmarked the resources directory as test resources root, but nothing really happened. Can you point me out, where am I wrong? "
552	q552	0.33584250665548415 "Mocktito ArgumentCaptor for Kotlin lambda with arguments"," I am trying to test this on Kotlin: Where doSomething is: How can I create an ArgumentCaptor for this? Right now I am doing this But I am getting java.lang.IllegalStateException: captor.capture() must not be null I also tried integrating mockito-kotlin but I get a PowerMockito error: "
361	q361	0.33584250665548415 "Run espresso test multiple times"," Sometimes I faced with rare bug in my application. But I can't reproduce it as it's very rare. So, I decided to write simple espresso test: How can I loop this test and stop it when matching fails? "
139	q139	0.3351564953327595 "kotlin and ArgumentCaptor - IllegalStateException"," I have a problem with capturing the Class argument via ArgumentCaptor. My test class looks like this: When I run the test, following exception is thrown: java.lang.IllegalStateException: classCaptor.capture() must not be null Is it possible to use argument captors in kotlin? ========= UPDATE 1: Kotlin: 1.0.0-beta-4584 Mockito: 1.10.19 Robolectric: 3.0 ========= UPDATE 2: Stacktrace: "
2042	q2042	0.33466943820234885 "Android (Kotlin) code coverage anomalies"," Code coverage (Jacoco) in Android connected tests is a very useful way to determine what methods/functions need some TLC. Now that I am switching to Kotlin over Java I have discovered some anomalies that I cannot explain, as this screen shot illustrates: The methods starting with _$... are internal to Kotlin or Android, I strongly suspect. My questions are: 1) does anyone have any insight into why these methods are included in the Jacoco code coverage report, and 2) is there a way to exclude them? "
5146	q5146	0.33466943820234885 "Android robolectric unit test load bitmap from drawable"," I am trying to load a bitmap from a drawable in my resources, but it appears to be empty when the following code is run in unit tests, but not empty when run from a normal activity: I really don't understand what's happening, as the same code produces different results whether I run it in the app or in a test... EDIT When running this in instrumented tests, everything works well. I would still like to understand why drawables are not obtained in unit test though. "
310	q310	0.33438775089614237 "Upgrade Kotlin from 1.0.2 - 1.0.3: java.lang.NoSuchMethodError: No virtual method provideInjectedData$app_compileDebugKotlin()"," I have a Kotlin Espresso Dagger2 small project. Works well when I use Kotlin 1.0.2. After migrated to Kotlin 1.0.3, when running the Espresso instrumental test (on MainActivityTest), it error as above. My Dagger2 TestModule is as below The dagger2 generated ApplicationTestModule for the InjectedData is as below Where the is Cannot Resolve by AndroidStudio. The test run fails. I reverify that when using Kotlin 1.0.2 (1.0.1-2), the above function also exist also Cannot Resolve by AndroidStudio. But the test still run. Is this a Kotlin or Dagger issue? How could I resolve this? To duplicate the problem, the code could be found in https://github.com/elye/kotlinespressomock. Just change the to and run the in AndroidTest. "
3305	q3305	0.33438775089614237 "kotlin mockk not answer found error"," Hi i am trying to mock the response i get from a Single observable that gets returned from retrofit using a delegator that my presenter class calls and i am getting the following error: io.mockk.MockKException: no answer found for: LoginPresenter(#1).login(LoginRequest(email=hello@gmail.com, password=password123)) Here is my test code My actual Presenter code looks like this: i basically want to mock the injected dependencies you see from the main code and then run a happy path unit test. It fails when i call the presenter.login(loginRequest) with the no answer found error This is the kotlin extenstion plugin i am using http://mockk.io/ "
4808	q4808	0.32987005369742384 "Android Instrumentation blocked in coroutine"," My Activity has an EditText and a Button. When the button is pressed a long running function is called. During this time the EditText should be disabled. When the function has finished the EditText should be reenabled. This works fine when running the application however I have written an Espresso Unit Test to test this behaviour which does not seem to behave correctly. It appears the long running function pauses the unit test which takes over 3 seconds to run. Once the long running function has finished, the unit test then tests if the EditText is disabled which it no longer is as the task has finished and the variable is set back to I would expect the unit test to start the function then, as it is ran in a coroutine, it would continue to the next line to check the EditText is disabled. I have tried all different variations of CommonPool, UI, launch, async, Deferred etc but nothing seems to get the correct behaviour. "
420	q420	0.32973319878430024 "RxJava Schedulers.immediate() behavior while Unit Testing"," I am trying to write test for my DAO object that uses reactive interface. I have a table with recipes and I want to test that when I insert data to this table, the subscriber receives list with recipes. I am using TestSubscriber class and performing asserts on that class. My simple test look like this: The problem is that assertion fails because no item was emitted. But when I insert this line above , the test is successful. My observable does not emit terminal event and therefore the timeout is performed, but in the meantime of waiting, the onNext was called with list of recipes. My getRecipes method: How is that possible? I thought that when I use Schedulers.immediate(), the operation will be performed on the same thread and my TestSubscriber receives the events. If not, how should I write this test so it succeeds? I want to test that onNext is called and I don't want to insert artificial sleep commands between. "
521	q521	0.3280689943895043 "nullPointerException on sharedpreferences helper class When running a test"," I'm starting to use Kotlin on a little demo android app. I've created a helper class which i'm trying to test with Junit and Mockito. Below is my sharedprefshelper: here is my test class: Issue is when I call in the helper. the line edit!!.putString(key, value).commit() throws a null pointer exception? not sure why? I've setup the mock and in the test class method annotated with (shown below) i'm sure my code is less than optimal. EDIT: Here's my fix for the method. need to return the mock preferences editor on the first call. "
4772	q4772	0.3273811248547803 "How to test whether the activity has not been routed with Robolectric?"," I have an activity which is as simple as this: So if the user is registered, it will stay at , otherwise it will route to . is a wrapper around . Works well and well tested in another codebase. I first tried whether from could do the trick or not, and it works of course. Then I tried whether the route to works or not, and it works. The test pass. Problem Then the problem is I don't know how to check if the activity stays at when . The following test failed due to the reason that . It is because there is no routing happen, so is null, but how to verify that it stays at this activity from the test? "
1150	q1150	0.3269650672780161 "Why does Kotlin allow having two classes with same name and package in different folders (i.e.: main and androidTest)?"," I have discovered that in Kotlin it is possible to have two classes with the same name, in the same package but one of them in the androidTest folder, and when running Espresso tests, it will be this one the one used. This is not possible under Java, and I'm wondering if it is an intended behaviour or it is due to something else. In the image, AppCollaborator, in Kotlin exist in androidTest and main, AS does not complain, but it does about JavaCollaborator. The fact is this behaviour is very useful in order to double some classes during test (API, Etc.), but I don't know if I can rely on it. "
3785	q3785	0.32694206338275955 "Mockito Stubbed Spy sometimes calls and sometimes does not call the spied object methods"," QUESTION In a , how can I achieve both; Call a real method from a Kotlin class under test and stub the inner calls it does to other methods within such class under test. SCENARIO I am using the following libraries; I also have a simple kotlin class in the form of TESTING WITH A SPY Which throws the error, Another Test case; gives the following error: Also, anytime I attempt to use the debugger to call myClassSpy methods or something related to it, it throws the following error: I have attempted to use TESTING WITH A MOCK Mocking the whole class does not work in this case because it is a mock and does not call the real method under test: Same error: If I further call the real method it also shows the same error: I also, tried opening but threw the same errors. Thus, how can I stub methods from a spy so that when I test methods from such spied object it does not propagate the call to other methods which I do not want to further mock. Any help, suggestion, idea... in order to test these type of methods is highly appreciated. "
756	q756	0.32648647386714846 "NoClassDefFoundError on Kotlin class in JUnit test at runtime"," My Kotlin class compiles and runs on an emulator without a problem. But when I test it, Android Studio says the class is not found. Here's the Kotlin class and an example of using it: However when I write a JUnit test for the Kotlin class: Android Studio compiles the code, but refuses to run the test: Here comes the section in the module-level : What did I do wrong? "
2402	q2402	0.32449344523406287 "Why is this Android Instrumentation Test invoking activity onCreate twice?"," I have this test class: And I have this activity: When I run my test gets executed twice. What gives? The issue is that I'm trying to mock out an api call which looks like it's working ask expected, however there is another log that I'm not sure where it's coming from. For reference, here is the out put in logcat As you can see, I hit once, and then I hit my mock server after that. "
1815	q1815	0.32398854960066736 "ClassCastException with ServiceTestRule's bindService method"," I have written a function to get bound services using the ServiceTestRule, which is as follows: This class is inherited by the classes which have the test cases. I get the 'bound service' using this function in the child class' companion object's @BeforeClass function. This works fine if I have to run just one Child*Tests class. But when I run the whole suite, the first class runs fine but the rest of the classes fail with the following error: java.lang.ClassCastException: ServiceB cannot be cast to ServiceA Please note that I can only get one bound service within a Child*Tests class. If I try to get another bound service in the same class it fails with the same error. If more details are needed to clarify the situation, then please let me know. "
2294	q2294	0.3235435542609749 "The result the same, but the test case not pass in unit test"," I just touch the unit test, today encountered a very strange question, I use to determine whether the two objects are equal, there is a test case can not pass, when I test the object: but look at the results are the same: my test in here, can somebody solve this and tell me what's the problem? "
4122	q4122	0.3221321987105777 "Base Presenter Test class using Mockito and Kotlin - working around Generic type erasure"," I'm trying to write a base test class with generics to reduce boilerplate code. It's specifically for testing (MVP) Presenters and I'm using Mockito to mock the View interface. E.g. something like this (simplified): This is a problem because type erasure means Mockito can't mock the concrete View type passed in the generic parameter. Attempting to run such a test will produce a at runtime. My current workaround is to add an abstract function to return the View Class so it can be mocked directly in the base class: This means more boilerplate code in the concrete test class which somewhat defeats the purpose of the base test class altogether. It's also the classic Java workaround to generic type erasure. I'm wondering if there's a a better way to do this with Kotlin? (I was thinking reified generic type parameters somehow, but they only apply to inline functions.) "
1375	q1375	0.3212696732921123 "Android Studio 3/Kotlin code coverage"," My android app is multi module project: I'm using Junit/Mockito for tests and I have issue with generating code coverage for kotlin android modules only. Tested lines are visible for android studio. tested class in ui.viewmodel package: But, for pure kotlin (eg. domain, presentation) test coverage works fine: I'm using Android Studio 3.0 Canary 8 You can look at my build.gradle files at github: build.gradle dependencies.gradle application.build.gradle presentation.build.gradle Example test in android application module: MostPopularViewModelTest Example test in pure kotlin module: MostPopularPresenterTest Can someone help me with my problem? I tried generate code coverage via Jacoco but it also did not show code coverage. "
3479	q3479	0.31952027695982643 "Instrumentation tests not found in Android Project on Kotlin"," There's problem with instrumentation tests in Android project: they're running when invoked from Project Structure window, but when they're running from editor's green arrow. I suppose that they're running as Unit Test. Funny part is that Java project has no problems with that. And if I run Instrumented tests on OS Windows or MacOS - everything is okey, but not in Ubuntu. Kotlin plugin version is . Gradle version is . "
3951	q3951	0.31888634788862463 "Write a test cases for custom view"," A custom view contains several attributes as property, to make this code testable than added unit test (RobolectricTestRunner). TestCase "
2502	q2502	0.31487282491017193 "Run Kotlin Koans tests from Android Studio"," Windows 10, Android Studio 3.0. So I just cloned Kotlin Koans repo from master branch and tried to run tests in two different ways: 1. Using IDE, when I press the green arrow next to the test method I see: 2. And when I try to use terminal as described in Kotlin Koans Readme: it gives me an output of: I've seen a lot of suggestions that there might be tools.jar missing in jdk folder, I am using internal Android Studios jdk and it's presented here. I also tried to disable gradle deamons - result is still the same. "
4269	q4269	0.31432717739502697 "How to test Android rest service?"," I want to write a Test file in Kotlin to test my endpoints, if they are working properly and sending proper data. I started very easy, but Unfortunately I get a : Process finished with exit code 1 Class not found: \"com.example.MySampleSdkTest\"Empty test suite. Whats wrong? "
414	q414	0.31432717739502697 "Robolectric KeyStoreKeyGenerator"," I'm using in my project Dagger2, KeyStoreKeyGenerator (from in.co.ophio.secure) and I want to use Robolectric to test my Fragment. I inject presenter to my Fragment. Presenter has userPrefs injected. UserPrefs have KeyStoreKeyGenerator implemented this is my presenter and this is my test After running test I see: Should I create shadow KeyStoreKeyGenerator? Should I wrap KeyStore class using interface? "
3874	q3874	0.31430549122773765 "Unable to test code that uses coroutines and suspend functions with Mockito"," I'm trying to write an app using MVP and adapting the asynchronous Repository pattern I'm used to write in Java to use Kotlin's suspend functions. I haven't, however, been able to properly test code that uses suspend functions. The further I got was having tests run and fail from what I believe is the mock not returning the object it was supposed to, but null instead. Here's a small app that shows the problem: The (the method alternates between returning a dummy User and throwing an exception): The View: The Presenter: and the test: Which outputs... I have tried a lot of things but I still haven't been able to write a testable MVP app using suspend functions / coroutines in Kotlin. Can't even do it with one as simple as this one. What am I missing here? "
5430	q5430	0.31371708415773497 "Android Mockito.verify says Argument(s) are different! with printing same content"," The situation I have an interface of a which has this method: I want to verify, that this method is called with a specific . Internally object that being tested call this method with object. All the events are specified as The problem The test fails with this verification: with message: Argument(s) are different! Wanted: tracker.trackEvent(\"EVENT\", null); ... Actual invocation has different arguments: tracker.trackEvent(\"EVENT\", null); ... There are many solutions, which are using , , , , etc. None of them worked for me, giving the same or "
1649	q1649	0.31235549174731375 "NoSuchMethodError: No static method beforeCheckcastToFunctionOfArity"," I have tests for my Android app, written in using , and . I tried to convert them to , but my tests are failing with this Exception: The line that the stacktrace refers, is the second line of this code (the casting): And the declaration of the function that I am mocking above is like this: I tried to add this to my proguard file, but nothing changed: "
1222	q1222	0.3115979408983691 "\"Empty test suite.\" in pure kotlin module. (Spock/Android)"," My android app is multi module project: Modules :application and :dataproviders working fine with Spock, test running and completing without problems. But :presentation and :domain which are pure kotlin modules have problem with spock framework. There are my simple examples: MostPopularPresenterTest.groovy This test end with error: But, test written in Java/Junit4 passing well and did not throw any error: MostPopularPresenterTest2.java I'm using Android Studio 3.0 Canary 5 You can look at my build.gradle files at github: build.gradle dependencies.gradle application.build.gradle presentation.build.gradle Can someone help me with my problem? EDIT: while ran /.gradlew test test are running. "
3438	q3438	0.31084643520792654 "Instrumentation Tests will run as Local Unit tests on Android Studio 3 (Empty test suite)"," I am having some problems with running in Android Studio 3.0.1 and Kotlin (I didn't have such problems with previous Android Studios and Java). I created this (very simple) class [reference] in package which looks like this: When I try to run the test, there are two problems. First, it wants to run the test in the console without opening an emulator or deploying the apk package to a device (as it is just a normal local unit test). Additionally, I get this error message as well: I wanted to force an instrumentation runner in the option (something like this solution for example) but there is no such option in the new Android Studio 3.0.1 (compared to 2.3 for instance) Update: here's my file content: It is worth mentioning that if I create a new configuration under in , select this configuration and run the project using this configuration (Shift + F10), the instrumentation tests will run just fine (All of them together). But when I try to run the tests individually (using the little play icon beside each individual test method or test class), a new configuration of the type will be created named after the test itself (e.g. in the code above) and then the IDE tries to use that configuration to run the test; Hence the errors. Any suggestions? Thanks in advance Final Update: Well after a fresh reinstall of Android Studio, the problem was solved. So I guess there was something wrong with the IDE's configuration or something. "
1229	q1229	0.30992737343957877 "Mocked Object with Mockito Kotlin Not Stubbing Method"," I have the following code: The constructor of looks like so: I am getting a when stubbing the method because that method's implementation uses the passed in the constructor and the real method is being called? What am I missing here? the whole point is to stub the real implementation of this method? "
4383	q4383	0.30918079404799864 "Make a API call in JUnit with Kotlin"," I am beginner in automatic test so I wanna to make an API call to update some data on backend and I wanna to test that with JUnit4. The problem is when I wanna to subscribe make that call he throw NPE. My test class looks like: And here is where I POST my user data on backend in Presenter UPDATE mUserService.checkUserApprovedStatus(phoneNumber) is null "
343	q343	0.30716352341994063 "Unit test on Kotlin Extension Function on Android SDK Classes"," Kotlin extension function is great. But how could I perform unit test on them? Especially those that is of Android SDK provided class (e.g. Context, Dialog). I provide two examples below, and if anyone could share how I could unit test them, or if I need to write them differently if I really want to unit test them. and Any suggestion would help. Thanks! "
4179	q4179	0.3056034764781698 "How to mock objects in Kotlin?"," I want to test a class that calls an object (static method call in java) but I'm not able to mock this object to avoid real method to be executed. I've tried different options like Mockk, How to mock a Kotlin singleton object? and using PowerMock in the same way as in java but with no success. Code using PowerMockito: With this code I get any() method is from mockito_kotlin. Then If I pass a mocked context to newIntent method, it seems real method is called. "
3312	q3312	0.3047785698104983 "Starting instrumentation tests from the play icon in Android Studio runs them as JUnit on the JVM"," When I try to run instrumentation tests in Android Studio by clicking the Play icon in the gutter on the left of a file, it creates the wrong run configuration. I'm using Android Studio 3.0.1. This seems to only happen if the test is written in Kotlin. "
66	q66	0.3047785698104983 "Android JUnit test blocks indefinitely when Observable observed on AndroidSchedulers.mainThread()"," I'm writing a simple test that is equivalent to: The test blocks indefinitely on when is present. Is there a way to transform the observable to return the result? The is returned from method call with .subscribeOn and .observeOn already applied so removing those is not an option. "
653	q653	0.30215725389017023 "Instrumented tests can't run in Android library modules that have Kotlin files"," It's basically in the title, I can't run any instrumented tests in Android library modules that contain Kotlin classes. This is regardless of whether the tests depend on the Kotlin classes. Here are the simplest steps I could reproduce this issue with: Create a new Android library project with default settings Just to check, run example instrumented test, runs fine Add a Kotlin class Run example instrumented test, still runs fine Add a new Android library module with all default settings again Run example instrumented test, works fine Add a Kotlin file, only containing a Attempt to run instrumented test again, now the build fails with the following message: "
536	q536	0.29944492024719266 "Timeout in espresso tests, test doesn t run"," There is an auxiliary class DialogIdlingResource, by which I try to run my tests. The tests take place, except this one. After pressing the button, everything stops. Code snippet with two helper methods: Probable that the error due to the two methods of regester and unregister (idlingResource) But in fact it should work, but may be somewhere that probably made a mistake, an auxiliary class code: ALSO try to resolve problem with next solution. And when i run just one of my test, all works is good. But if i start all my tests, i catch error. Beacause test hasn t time to check for example text in my dialog, he opened dialog and that is all. IdlingResource class: } in my test And i repeat, just when i start all my tests, i need to put sleep between registerIdlingResources and checktextView somethinng like this: Please help to resolve this problem. And sorry for my english. "
3087	q3087	0.2993619717964729 "Class not found, Empty test suite in androidTest using Android Studio 3.0.1, Room, Kotlin"," I have a problem with running my androidTest. Here is my setup in gradle: And here is the test(almost nothing here): When i try to run the test i get this: And it is not starting UPDATE I noticed some really bad thing. When i started new project in Android Studio and try to run default androidTest it gives me known error: The workround for this is to add this line to gradle.properties: This is the steps that I've done in my original project previously(i ran into that error also). Unfortunately, after it it give me the error from my question. So it really is the matter of how to solve the isse with the aapt2 to make this work. See here also: AAPT2 error: check logs for details, after workround the androidTest not working Any idea? "
968	q968	0.29841388794229196 "Realm access from incorrect thread in Espresso"," Before each espresso test, I have an annotation where I initialize my . Code snippet of my : But when I run my tests, I get next error: So how i can correctly init my realm in my tests? One of the solutions that I found interesting, create a fake init realm. "
1174	q1174	0.2957929923198006 "java.lang.ClassNotFoundException: com.intellij.junit5.JUnit5IdeaTestRunner using spek in kotlin"," I am very new using spek in kotlin testing. When using spek , got the following error on logcat. I don't why I got this I have following dependencies on gradle file Test file Can you please suggest, how to get this kind of error. I would appericate your valuable suggation or comments on this topic. "
5307	q5307	0.2940831487297309 "Kotlin - Java code coverage in Android studio showing 0% NOT WORKING"," In one of my android project in Android studio, I have some source files written in Kotlin and there corresponding unit tests written in Java, Now when I try to run the test class with coverage it shows me 0%. All tests pass and runs fine but the coverage shows is 0%. For the scenario where source file written in Java as well as there test class is also in Java it works perfectly fine, only issue is when source class is in kotlin and test class in Java or vice-versa. Any help is appreciated, Please let me know if anyone knows how to fix this. Thanks "
4816	q4816	0.2940688161030394 "How to mock after setup dagger-android 2.15 when writing espresso tests?"," If we just use plain dagger 2. In the class, we will have a property which holds the . Then we can swap it during espresso tests. But when I setup my project using . Things becomes more implicit if adopt too much Dagger magic. The code is more clean, but makes testing a little bit hard. This is the class: This is the HomeActivity Take this code for example. How to mock that injected Which could be a HTTP call underneath? "
2079	q2079	0.2940341098554551 "How to disable Fabric when running test"," How can I disable Fabric: Crashlytics and Answer when running test? Is there an other way to disable Crashlytics during the test instead of putting this code before every test? and avoiding to put a global boolean like "
508	q508	0.2921504963255771 "Mocked object still calling method (Mockito + Kotlin)"," I'm trying to test this class: For this purpose, I've created this test class: Which is failing with the following stacktrace: The place that the stacktrace point is the last line of postman's login fun: Once postman is being mocked, why in the world is it calling the actual implementation of fun? "
3892	q3892	0.291235337563715 "Testing loading and error state with kotlin coroutine"," Is there a way for me to mock a suspend function so that it never emit data or it will emit error. With RxJava 2, I can mock the function to return either Observable.error or Observable.never but I couldn't find an equivalent feature in kotlin coroutine. Here's the function that need to be mocked. From my viewModel I'm calling the suspend function in this way In the test class for that viewModel, I want to mock the the execute function so that it never return data, so that I can test whether the data passed into the liveData is the one I'm expecting. In RxJava, I can just mock the function to return Observable.never() and Observable.error(). However with coroutine, I'm lost on finding a way to mock it. "
3219	q3219	0.2906745696373717 "Float primitive magically become 0 when used to init PointF or RectF in Kotlin Android"," See the following unit test I created: The second and third test case failed with error: Apparently, the primitive float become 0 when used to initialize , the same applies if used to initialize . This error completely blow my mind, is this a bug in Kotlin? UPDATE: I have confirmed that the three test cases passed as instrumented test, which proves the stubbing of Android classes is the cause of the test failure. However, I am still observing the same issue in my application - which is not a unit test... Somewhere in the application, I have logcat statement as the following: And the logcat output I got is this: UPDATE2: I figured out it is indeed my own fault that I have altered the bound which reset it to (0, 0) origin. Not an issue with Kotlin. "
367	q367	0.2898370742953872 "Kotlin androidTest: Tests ran to completion. Empty test suite"," I'm trying to translate my tests from java to kotlin. Simple unit tests were translated successfully, like this: But when I'm trying to run androidTest it fails with message: \"No tests were found\" and Code worked perfectly, when was in java. Related code: build.gradle parts: Simple test: Test component is in Kotlin: And test module is also in Kotlin: I don't even see, that DaggerAppComponentTest is built. Why I use apt instead of kapt for tests? Because I've got an error that I can't mix apt and kapt in one project. I tried to switch apt to kapt and got billion of errors. As I understand, kapt processes kotlin files and using it people generate kotlin code? And for apt: java files, java code. How to mix it? How to solve this problem? Solution Accepted solution works. Before that I returned kapt for Kotlin. With and . "
3681	q3681	0.2897478505205578 "Descriptions for ViewAssertion in Espresso"," I have this code: How can I add my own message to it in case of a fall of the test with an error? For example as in junit: "
77	q77	0.28954718425227777 "Google Espresso: delete user data on each test"," I'm looking for a way to delete the database from the app before each test using Google Espresso. I've got this piece of code in a @Before function (kotlin code): It used to work before but I left my part time project for some month and now, after upgrading to API 23 and new testing framework version, all my test can't start because of the \"activityRule.launchActivity(i)\". So I got rid of the last 3 lines and the tests can start again but by delete database code fails one time in two :( Is there any better way to delete user data before the app is started by the test framework? "
738	q738	0.2883980996100384 "Espresso tests with Kotlin"," Every time I try to test my Android app and I rewrite my tests in Kotlin I always get: I am trying everything to make Espresso see my tests... but no luck. Does anyone know what can be wrong? "
4099	q4099	0.2873220727563124 "Kotlin: Unit testing a function that takes a function as parameter"," I have a function that retrieves a list of items from a repository. Instead of using a regular callback I pass in a function and invoke this with the result. But how can you unittest this kind of function. Is there some way to verify that the passed in function is being invoked or should I refactor and use a regular callback and test it using a mocked callback-interface? My code: "
3092	q3092	0.2870535881575026 "Kotlin class runs as junit tests even when it is in androidTest package - for Java class it runs normally"," I've run into very strange error. When i try to run test that are in my Kotlin class in androidTest package they are running as test junit mehthods and this error appears: You can try it for yourself. I am using Android Studio 3.0.1 When i am creating class like this in Java: Everything works fine. But when i convert the Java file to Kotlin: It gives me this error. Whats wrong? "
476	q476	0.28472797148733825 "Android Espresso tests (written in Kotlin) cannot see main classes and packages"," I have an issue with Kotlin Espresso tests. I have applied Gradle plugin in the module's build script, and the tests run without issues in Android Studio (the test class is annotated and run by runner), but running the Gradle task “assembleDebugAndroidTest\" from terminal fails to find my main classes and packages (classes used in the tests). It throws an error. Here is the sourceSets section of the build script: And test dependencies in the module: Project's build script: I'm using version 1.0.5-2 of Kotlin. We have a custom test runner as which registers some idling resources and some activity hook for unlocking device screen and acquiring the wake lock, and uses TestButler for disabling animations and stabilizing tests. However, the tests are annotated with Espresso jUnit 4 runner (). But the fact that Android Studio runs the tests without any issues is confusing. "
2426	q2426	0.2840756305008936 "\"Error: Could not find or load main\" OR \"Class not found\" - with android module (Gradle/IntelliJ)"," I have this Gradle setup: : : : : : When I try to run the main from IntelliJ (Ctrl + Shift + F10) I get the error: BUT, when I remove this line from and refresh Gradle like this: Then the main runs. How can I setup this project that I can run the main having an Android (library) module? Note: I also tried running tests, then I get this error: Running the tests from the command line with works in both cases. Only running things from IntelliJ wont work. Gradle wrapper: 4.3 IntelliJ 2017.3 and 2017.2.5 tested "
306	q306	0.2838258281015593 "Testing Android Kotlin app - Mockito with Dagger injects null"," I'm learning testing on Android with Mockito and Robolectric. I created very simple app in Kotlin with RxJava and Dagger2, using Clean Architecture. Everything works well on device, but I can't make my test pass. Here is my LoginPresenterTest: LoginPresenter contructor: in i have: And, finally, GetCredentials: The problem is, that every field in is null. I think I miss something (I took pattern from this project: https://github.com/android10/Android-CleanArchitecture), but I can't find what is it. Does anyone know what may cause this? "
430	q430	0.28111535137603166 "JUnit testing in Android Studio with Kotlin stopped working"," I have a project in Android Studio where I created a java library module. In there I have a Kotlin class which I want to test. When I create the test in Kotlin and try to run it, the IDE keeps telling me: Process finished with exit code 1 Class not found: \"com.example.CacheTest\" Empty test suite. When I create the same test in Java everything works fine. I created tests in other projects in Kotlin as well and there it works. I recently update AS to 2.2.2 and use Kotlin 1.0.4 Does anyone have any suggestions? "
344	q344	0.2808748891578506 "How to unit test code wrapped in `runOnUiThread`?"," I have a function that calls as below I want to UnitTest to ensure the has call . But given that it is wrap in , I can't get to it. How could I unit test to ensure codes within is called? "
5174	q5174	0.27638456682679247 "Repository test failed while cloning - Bitbucket"," I am trying to clone a repository hosted in Bitbucket using Android Studio. However, Android Studio did not asked me for entering user credentials (My Username and Password). Secondly, when I clicked \"Test\" to test the link with the repository, it is showing me \"Authentication failed error\" which means that the test was failed. How can I resolve this? Git is installed on my system and recognised by Android Studio. "
4927	q4927	0.2721192482638271 "Mocking another parameter on function not working when one of them is a callback interface"," I successfully did some tests of asynchronous function with only one callback interface as parameter with mockito-kotlin library but when I try to do a test of same function with another parameter like a String or Integer I receive error: I´m sure I´m mocking properly callback interface with any() but I don´t know if I´m mocking integer parameter correctly. I tried with , , and but always the same error. Here is the class that I want to test: And this is the test class: This is base unit test class: And this is a class for inject mocks rule: Thank you very much for your help and excuse my english. Regards! UPDATE: I found the solution and posted as answer. "
101	q101	0.27134510243108817 "Cannot access internal components from test source with Android"," I have got the following structure: In I reference the . The : Now when I run , I get the following error: However, when I switch the plugins to use instead of , and instead of , the tests do succeed. How can I reference internal classes from my test sources when using the Android plugins? "
1026	q1026	0.27134510243108817 "Is it possible to run the latest version of Akka Framework (2.5.2) in an Android project?"," I'm developing an Android project and wondering if it's possible to use framework v. 2.5.2. This framework needs Java 8 to run and I know Android does not support Java 8. Is there a configuration that makes it work? Maybe using Kotlin? "
2132	q2132	0.26788202016655205 "Android Studio 3.0 \"JUnit version 3.8 or later expected\""," tried to follow this and this but without any luck. I am using Android studio 3.0 and junit 4.12. Windows 10. What I have tried: move the junit dependency up (tried test compilation and implementation scope) delete the tests in Run - Edit configurations... - remove all under Android JUnit and Android App My graddle looks like this: My test looks like this: UPDATE: ./gradlew test BUILD SUCCESSFUL in 25s 53 actionable tasks: 30 executed, 23 up-to-date Stacktrace: "
1236	q1236	0.26788202016655205 "@Before annotation being ignored by kotlin in espresso test?"," I have this instrumented test class written in kotlin and uses espresso to execute the tests. When I run it though, the function annotated with @Before is being completely ignored. Even when debugging the test and placing a breakpoint in it, it wouldn't pass through that point. Do you have any idea why this happens? I've been searching in google but most examples don't use @Before or simply don't mention any problem with it. I also added the logOut() function for more information. PD: writing the same code in java works perfectly. . "
4519	q4519	0.266028426286833 "How to unit test higher order functions in Kotlin"," In the above snippet how do I test that appropriate functions get invoked depending on the boolean value. I also use Mockito, so any way I can make use of that? "
2448	q2448	0.266028426286833 "run HelloAndroid from gradle?"," There are an overwhelming number and variety of gradle tasks: From : Simplest possible \"run\" is what I'm after. Something analogous to ? Generated code and build file: "
4242	q4242	0.266028426286833 "How to enable unit testing in a Java module in Android Studio?"," I am new to Android development. I have an android project with two Java modules. I would like to create some unit tests for the two modules. "
42	q42	0.2632309782439072 "Kotlin and new ActivityTestRule : The @Rule must be public"," I'm trying to make UI test for my android app in Kotlin. Since the new system using ActivityTestRule, I can't make it work: it compiles correctly, and at runtime, I get: Here is how I declared mActivityRule: It is already public :/ "
26	q26	0.26204817972494876 "Experimental JUnit support in Android + Kotlin not working"," Google recently released experimental support for running junit on local JVM in Android Studio. I wanted to try it out and since I am developing my Android app using Kotlin I want my tests classes be written in Kotlin too. Unfortunately, I can't make it working. I have updated my gradle configuration: Android Studio recognise test folder. This is my simple test class just to see if it works If I try to run it I get the following message "
5187	q5187	0.26108275441055884 "Test lambda functions in Android with Kotlin"," I need to Unit-Test a function and inside it calls the function on the object . This accepts two parameters, one integer and one function, like in the example below I am using and so far my test has the following lines But it doesn't compile because the call to the method does not specify the callback... I don't want to overwrite it since I want the test to use the original one and verify that the things inside are called properly, like: Is there a way to call the method and also mock the callback response to a value I set in the tests but still have it go through the original code flow? "
3677	q3677	0.2598075474170914 "Android \"[\\\\p{InCombiningDiacriticalMarks}\\\\p{IsLm}\\\\p{IsSk}]+\" regex compilation fails (works localy)"," I am following the correct answer from here: Remove diacritical marks (ń ǹ ň ñ ṅ ņ ṇ ṋ ṉ ̈ ɲ ƞ ᶇ ɳ ȵ) from Unicode chars to ,as you may expect, normalize some Strings. It works great against local unit test, but when I try to use it on the emulator I get: Any ideas what is wrong? "
2520	q2520	0.257791537120926 "How can I test AsyncTask no called?"," I'm writing some tests against an Activity. In the method of my Activity I have an async call. I'd like to write a test to verify that the AsyncTask was not called. How can I do this? I've attempted to mock AsyncTask, but I can't because being a final method. My initial thought were to do something like this: But now, having run into a few issues trying to test this way, I'm beginning to think that maybe I'm going about this the wrong way. It almost feels like I shouldn't be trying to test this against the activity, but right now that's where the call is made. "
4064	q4064	0.2570653689957152 "How to mock Kotlin Object in android?"," I have an object in kotlin that controls the current user's session information. I want to mock the sign in method which has a call back. While testing, I need to mock this method in the SessionController object. The AndroidTest goes something like this: Any suggestions/ideas as to how I can achieve this? I've read online to use Mockk for kotlin but have't been able to mock this method and invoke the appropriate callback. Any suggestions on improving the structure would also be appreciated. Thanks "
5595	q5595	0.25267267389896636 "Caused by: java.lang.AbstractMethodError: abstract method in Kotlin"," I have this code here: WhenI try to run this code I get the exception: How do I pass a function as a parameter? I just want to execute parseFiles(file) for each iteration. "
969	q969	0.25222571305542607 "Get plural and single from Chrono Time unit"," I need to display in Android \"1 minute ago\" and \"2 minutes ago\" by using plurals. The problem is that I am having a map of time units with a suffix. And then I am using it like this How can I convert that so I can pass the time value to the map? "
2585	q2585	0.25190682745924486 "Unit testing Rxjava observables that have a delay"," I want to be able to unit test an that has a delayed emission, but without actually waiting for the delay time. Is there a way to do this? I'm currently using a CountDownHatch to delay the assert, and that works fine, but increases the test run time. Example: "
3625	q3625	0.2514821282057913 "Cucumber tests do not run in specified order, what is wrong?"," So here is my problem: I have a set of tests, which I want to run in a specific order. In this question I found out that you could simply write down the sequence of the tests as you'd like them to run. Unfortunately, this doesn't seem to run on my Kotlin implementation, for reasons I cannot see. This is what I have: Additional info: all tests are in the same directory, all test names are specific - I have renamed them here for readability. Any suggestions? "
3344	q3344	0.2514821282057913 "`NoClassDefFoundError: android.databinding.DataBindingUtil` when running androidTest for fragment with data biding"," It concerns the following Android library project: https://github.com/RoRoche/kAndroidModular/tree/master/kAndroidModular/userrepos I try to run the following unit test: https://github.com/RoRoche/kAndroidModular/blob/master/kAndroidModular/userrepos/src/androidTest/java/fr/guddy/kandroidmodular/userrepos/UserReposFragmentTest.kt Technical stack: MVVM architecture with Android Architecture Components and Data Binding isolated fragment testing thanks to Fragment Test Rule multidex "
2941	q2941	0.24677005314555842 "Unit testing coroutines on UI thread"," I'm using coroutines to do an asynchronous call on pull to refresh like so: Everything here works fine when I actually put it on a device. My error, empty, and data states are all handled well and the performance is good. However, I'm also trying to unit test it with Spek. My Spek test looks like this: The test is failing because it says that there was no interaction with the mock. After some experimenting, it seems this is because I'm using the UI context via . If I make it just be a regular async, I can get the test to pass but then the app crashes because I'm modifying views outside of the UI thread. Any ideas why this might be occurring? Also, if anyone has any better suggestions for doing this which will make it more testable, I'm all ears. Thanks. EDIT: Forgot to mention that I also tried wrapping the and the in a , but I still had no success. "
5440	q5440	0.24654306621518668 "Instrument Test will not Recognize ActivityTestRule or associated Packages"," Before making a separate branch to try out Dagger 2, a simple Instrument Test was written using an ActivityTestRule. However, now, it seems any class inside of the androidTest directory is unable to access the android.support.test.rules package and the associated packages, leading to an Unresolved Reference error. What is wrong with the set up? Why will Android Studio not point to the package, even if the import statement is manually typed in? The first test that used to work: Gradle: A ham-handed attempt at another Instrument Test: Tried rebuilding/cleaning "
4863	q4863	0.24633555648617714 "Mock ViewModel in MVVM Activity"," Update 29/04/18 Re-titled for better accuracy. Problem is simple: ViewModels cannot be simply mocked on Activities because they are instantiated in an Acitivity's onCreate(). What is the best way around this? Some related ideas located here (unsuccessfully tried to implement) Original question Using Google's MVVM GithubBrowserSample codebase, I am trying to make an instrument test for checking that a loading state throws up a progress bar. Specifically, a mirror of the UserFragmentTest.loading() method. It's pretty simple stuff, I have tried to match my setup closely to Google's. However I can see it's not right. Specifically, I can see functions in my ViewModel (VM) are being called when I explicitly ask for them not to be in my test's function. I am using Kotlin, Dagger2, and the Architecture Components. When I run the test, I can see the code does indeed call nothing (not even the constructor) in the VM. Mine however calls the VM init block (which the sets up), and the getUser() function even though I ask for it to return dummy data. The only major difference I can see is mine is an Activity and Google is testing a Fragment, and the ViewModel mock function is using Niek Haarman's Mockito-Kotlin library. LoginActivityTest.kt LoginActivity.kt LoginViewModel.kt Logcat after running test: Edit: It looks like the issue here is that the VM is not correctly mocked. There's a couple related questions here and here which are having very similar problems. The injected VM factory is first used in the base activity's onCreate, but the activity needs to exist before we can override it to use our mocked VM. "
622	q622	0.2451913365316107 "Testing AnkoComponents and mocking AnkoContext"," I'm writing an Android application in Kotlin. I also use the Anko view library to replace xml with programmatic view creations. I'd like to write specs for my views (which are AnkoComponents). Is there an accepted methodology for doing this? I can't seem to find any information on specs + anko by googling or looking at the Anko docs. Specifically, I'd like to test the method. More specifically (and what I'm hoping will be answered by asking this question), is how do I mock out an which I can pass to in my test? "
503	q503	0.24467033538491825 "How to make MockWebServer work?"," I am developing an app using the MVP architecture. I am trying to test the Interactors of my app using MockWebServer. Well, I have this test: But, when I uncomment the assertCompleted on the TestSubscriber, I always get assertionError... I know the TestSubscriber works, because I use it in other tests. Here is my ApiCall: My NetModule: And my base URL (There's no backend server... could be anything): So, What am I missing? This code should be working... Any help is welcome! EDIT: So, I changed the code to this: And this: But I still get this error: "
3200	q3200	0.24319594666401578 "Unit testing a retrofit call that uses kotlin coroutines"," I'm using kotlin coroutines and kotlin retrofit coroutines to do network requests in the project I'm currently working on. But I'm unable to figure out how to make my unittests for the logic pass. Here's my code: Here's one of my unittest: I keep getting the following message when run: "
3251	q3251	0.24210374367316587 "Android Studio + Spek integration"," I'm trying to add Spek testing framework to my Android Studio project. Following the instructions Here, I ended up adding the following to my module : Then I annotated my test with However, when I try to run the test, I get: Any idea what am I missing? "
3476	q3476	0.2405938450841679 "Tests in kotlin"," I am new to development. In my app I want to write test cases but I am not able to use it. Src/test/kotlin folder is not getting created gradle If I run an androidTest I am getting Also which is good kotlintest or spek? "
1100	q1100	0.24027053134833826 "Android Espresso - How to check view is matches before activity finished?"," I am writing Android application using Kotlin and Espresso for UI testing. Given Activity with Button. By clicking on that button should appear Toast message with text \"Hello#_#World\" and activity should finish. Example code: On UI test I need to check text of that Toast message. But Activity finished before checking, so I catch NoActivityResumedException from Espresso. Here is my test method: How it possible to call #.check() method before activity finished? "
4585	q4585	0.2393421168189113 "RxJava 2 mock Observable doesn't work"," I use RxJava 2 to wrap barcode scanner in one of my app. This snippet show how I subscribe to and listen to it's events is object of type. This all works fine on real device with real barcode scanner. Now I want to unit test the method and try to mock the this way I'm expecting that when I call presenter must subscribe to and receive event with object I've provided. But this isn't happening. What am I doing wrong? "
2675	q2675	0.2383699890744788 "GridView inside ListRow using Leanback library"," Is there any way to do gridView inside ListRow in DetailsFragment or ListRowFragment? I'm trying make multipleviews fragment in Leanback. "
1550	q1550	0.23821782722123006 "How to run Different .kt file/Class in same src folder?"," I am new in kotlin , I started to learn Kotlin Language by installing intellij IDEA , now the issue is when i want to run second file by run button its only showing what i had run first file . Always showing Run , I want to run I am no able to run new crated class in kotlin, it's only showing the first class what I had run first time in the project. "
1126	q1126	0.23731279638673497 "Run single kotlin class with main function in android studio"," I am trying to get familiar with Kotlin to use in my android apps. So first I want to try out some simple kotlin examples, just to get familiar with syntax of kotlin. I made a class named Main.kt in my android project with just main method. Android studio shows me a kotlin icon to left of main method and when I click on this icon, It shows me below three option: 1) Run Mainkt 2) Debug Mainkt 3) Run Mainkt with coverage I chose first one but it throws me I am stuck with such a small problem. Let me know if anyone of you have faced problem like this and whats the solution. "
1651	q1651	0.23682836435212803 "What to do in Espresso when the recyclerView itself returns AmbiguousViewMatcherException?"," The problem is that I have a tabbed view, and each page contains the same recyclerView with different data pertaining to that tab. If I'm not describing it too well, it's essentially the same as described in this tutorial: https://github.com/codepath/android_guides/wiki/ViewPager-with-FragmentPagerAdapter I am creating instrumentation tests using Espresso, and when I try to call to use with a RecyclerViewAction, I am returned the AmbiguousViewMatcher telling me there is more than one recyclerView in the hierarchy. How can I specify a particular recyclerView? I assume that I will need a 'customRecyclerViewMatcher' of some sort "
4876	q4876	0.23631613162382628 "Kotlin's matchEntire regex function does not catch what its Java equivalent would"," I'm trying to validate that an input string is a valid stock ticker symbol in an Android app. Neither the regex, nor the test cases that I am using is original: they are validated here. What is original, is my adaptation of the original Java code to Kotlin: When I run my JUnit test suite on it (the assertions syntax here follows Kluent); it fails at \"GOOG\", telling me that string is not valid, when it should be. Is my understanding of the class wrong? Is there something odd happening with the escape characters in the regular expression itself? "
1707	q1707	0.23514952761990587 "Test RxJava2 Flowable Query Room"," I've been trying to write unit tests for my Room database, which I've done in the past when I have queries return a list and I create a database that allows main thread queries, but now that I'm trying to test with RxJava values I have no luck. Here is my DAO code: And here is my database testing code, where I've tried a few things to get it to pass: If anyone would actually like to see or test run the code, please check out the app-refresh module of this repository: https://github.com/adammc331/cashcaretaker DAO: https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/main/java/com/adammcneilly/cashcaretaker/daos/AccountDAO.kt Test class: https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/androidTest/java/com/adammcneilly/cashcaretaker/data/CCDatabaseTest.kt "
3597	q3597	0.23514952761990587 "Android LiveData in androidTest returns null"," I'm running an androidTest instrumentation test and I have a method that returns LiveData from a DAO object using Room. I'm calling the method like so: I used Mockito to mock the observer: This should return an instance of LiveData containing the Animal at id 1, but it's null. It's my understanding that in order for LiveData to return anything, there must be an observer. Did I set this up incorrectly? Note: If I change the signature of getAnimal() in the DAO to return an Animal directly, rather than a LiveData, then it works so I know it's something with LiveData. "
372	q372	0.23506737046149379 "kotlin + espresso: No activities found"," Coming back to Android dev after a year and I'm all confused on espresso again -_- I'm just trying to setup a simple espresso test and it fails saying: and indeed, I don't see the app being launched. Here is the code: MainActivity is in the manifest and is working fine when launching using the launcher. What am I missing? "
1956	q1956	0.23209690865738966 "Kotlin Unit Test Not Finding Module Dependency Interface"," I have an module and a module. In my module I have an interface called . In my module I use to inject an implementation for this into my class and this works fine. When I then go to test it using a kotlin unit test, at runtime I get a . I have also tried to include the module in my modules dependencies like so but that also did not work: Here are my current test dependencies and also how I'm including the module In my unit test I'm using it like this which could be the issue: "
3389	q3389	0.23024226133093664 "doReturn doesn't act as proxy but calls my method"," I'm implementing some Unit testing in my app and I have a dependency that relies in the context. That dependency returns a list of but I want to mock that logic to return whatever I want. I already know the difference between: a) b) (b) shouldn't invoke the method. Now I have a method called in : and that relies on the . Since I want to mock it, this is my test: but that ends calling my code: so that method is called, I just want to retrieve an empty when that method is called from JVM. EDIT When using I get the same error, but I get one more line of Mockito error: "
4791	q4791	0.22738483139489807 "How to trigger the lost focus event for a TextEdit using Robolectric?"," I have a 2 TextEdits on the screen. And they all have a which will check the text in the field, if it's empty it gonna set the property to the error message. It works according to my ad-hoc test. But I don't know how to verify this using ? I tried this: I tried to mimic the real world, where the user just click the text edit one by one without entering anything. But in the real world, as soon as the user clicks the , should show the error message. But the test will always fail because the is null. I think it's not the way to trigger that event. What is the way to test this behaviour? "
3178	q3178	0.22628265978643639 "OkHttp MockWebServer fails to accept connections on new instance"," I'm using OkHttp MockWebServer to mock the server responses. I have implemented two tests classes, the first one contains two tests and the second one, one test. The first class works fine, but for the second class, there is an error because the socket server is closed. The first test class The log are correct for the two tests The second class is not working and is called after the first class The log file, reason socket closed "
399	q399	0.22316764730806501 "How to inject test overrides into the default dependency graph?"," I would like to inject mocked overrides into my Android instrumentation tests using Kodein. I don't know which is the optimal approach to do this. Here's what I have in mind: My app uses a application class. The served Kodein instance holds all dependencies required by my app. In my tests I would like to inject mocked overrides for specific dependencies to test behavior of the app in various situations. Overrides should be different for each test, and should be injected before/while the test runs. Is the configurable Kodein extension sensible in this situation, or is there a simpler, better suited approach (and if so, which)? "
